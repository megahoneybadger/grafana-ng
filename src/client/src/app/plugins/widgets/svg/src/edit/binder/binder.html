<div class="gf-form-group" *ngIf="id">

	<i class="muted" *ngIf="!rules?.length">No rules defined yet.</i>

	<h5 class="section-heading" *ngIf="rules?.length">Rules for <span class="query-keyword">{{id}}</span></h5>

	<div class="gf-form-inline" *ngFor="let rule of rules">

		<div class="gf-form">
			<label class="gf-form-label  query-keyword" *ngIf="index==0">
				IF
			</label>
		</div>

		<ed-autocomplete-picker
			[(ngModel)]="rule.reducer"
			[formatString]="'{0}()'"
			[request]="reducers$">
		</ed-autocomplete-picker>

		<div class="gf-form mr-1"  >
			<label class="gf-form-label query-keyword" >AT</label>
		</div>

		<binding-query-editor [query]="rule.query"></binding-query-editor>

		<ed-autocomplete-picker
			[value]="rule.evaluator.type" 
			[request]="evaluators$"
			(pick)="onEvaluatorPick( $event )" 
			valueClass="query-segment-operator">
		</ed-autocomplete-picker>

		<ed-textbox	[(ngModel)]="rule.evaluator.param" width="6" >
		</ed-textbox>

		<div class="gf-form"  >
			<label class="gf-form-label query-keyword" >THEN</label>
		</div>

		<ed-autocomplete-picker
			[(ngModel)]="rule.resolver.property"
			[request]="resolvers$">
		</ed-autocomplete-picker>

		<div class="gf-form"  >
			<label class="gf-form-label query-keyword" >=</label>
		</div>

		<ed-textbox	[(ngModel)]="rule.resolver.value" width="6" >
		</ed-textbox>

		<div class="gf-form">
			<label class="gf-form-label pointer" (click)="onRemoveRule( rule )">
				<i class="fa fa-trash"></i>
			</label>
		</div>



	</div>

	<div class="gf-form">
		<label class="gf-form-label pointer" (click)="onAddRule()">
			<i class="fa fa-plus"></i>
		</label>
	</div>

</div>

<div class="gf-form-group muted" *ngIf="!id">
	<i>Select binding target element.</i>
</div>